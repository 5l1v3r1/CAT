@startuml
frame "Web Frontend"  {
node web [ Web User Interface
hosted.eduroam.org
===
CentOS 7
Apache 2
PHP7
MariaDB
GeoIP
haveged ]

database mysql [ MariaDB
]

component ca [ Embedded Intermediate CA
===
PHP builtin functions
OpenSSL command-line
]

}

frame "OCSP Responder" {
node Webserver [ Webserver
ocsp.hosted.eduroam.org
===
CentOS 7
Apache 2
PHP7
]

component ocspstore [ OCSP statement storage
===
directory on filesystem
]
}

frame "Client Root CA" {
node rootca [ Raspberry Pi
===
Raspian Stretch
RSA/4096
ECDSA NIST P-521
]
}

frame RADIUS {
node authX [ auth-X.hosted.eduroam.org
===
CentOS 7
FreeRADIUS 3.0.x
]

}
cloud sp [ 

eduroam Service Providers

]

frame "External Resources" {
node signer [ Code Signing Cluster
===
use instance of eduroam CAT 
@SURFnet data centers
]
node sms [ SMS Gateway
===
Nexmo - www.nexmo.com
]
node ol [ OpenLayers / OpenStreetMap
]
}
web -- mysql
web -> ca
web -> ocspstore
web -- signer
web -- sms
web -- ol
ocspstore -> Webserver
rootca ~~ ca
RADIUS -> Webserver
RADIUS -- sp
@enduml
